<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,
initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Liquid Glass - LWKHO</title>
  <!-- Critical CSS for immediate rendering -->
  <style>
    :root {
      --accent: #00ffcc;
      --win-blue: #0078d4;
      --hazard: #ff3366;
      --bg-dark: #010307;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
system-ui, sans-serif;
      color: #ffffff;
      background: var(--bg-dark);
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #bg-canvas {
      position: fixed;
      inset: 0;
      z-index: -1;
      background: var(--bg-dark);
    }

    #calc-container {
      position: relative;
      width: 92%;
      max-width: 400px;
      padding: 24px;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(25px) saturate(180%);
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 32px;
      box-shadow: 0 40px 100px rgba(0, 0, 0, 0.9);
      z-index: 10;
      opacity: 0;
      animation: rapidBoot 0.15s ease-out forwards;
    }

    @keyframes rapidBoot {
      from { opacity: 0; transform: scale(0.98); }
      to { opacity: 1; transform: scale(1); }
    }

    #display-area {
      width: 100%;
      margin-bottom: 24px;
      padding: 24px 20px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 24px;
      text-align: right;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      min-height: 140px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
    }

    #history {
      font-size: 0.9rem;
      color: var(--accent);
      min-height: 1.4rem;
      margin-bottom: 6px;
      font-family: 'Orbitron', 'Courier New', monospace;
      white-space: nowrap;
      overflow: hidden;
      opacity: 0.7;
    }

    #current-val {
      font-family: 'Orbitron', 'Courier New', monospace;
      font-size: 2.6rem;
      font-weight: 700;
      white-space: nowrap;
      overflow-x: auto;
      scrollbar-width: none;
      line-height: 1.1;
      color: #fff;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .key {
      aspect-ratio: 1/1;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.04);
      background: rgba(255, 255, 255, 0.03);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.08s, transform 0.08s;
    }

    .key:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .key:active {
      transform: scale(0.92);
      background: rgba(255, 255, 255, 0.2);
    }

    .key.operator { color: var(--accent); font-weight: 700; }
    .key.action { color: var(--hazard); }
    .key.equals {
      background: linear-gradient(135deg, var(--win-blue), #004d8c);
      grid-column: span 2;
      aspect-ratio: auto;
      color: white;
      font-weight: 700;
      box-shadow: 0 8px 25px rgba(0, 120, 212, 0.4);
    }

    #current-val::-webkit-scrollbar { display: none; }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;600&display=swap"
rel="stylesheet">
</head>
<body>

  <canvas id="bg-canvas"></canvas>

  <div id="calc-container">
    <div id="display-area">
      <div id="history"></div>
      <div id="current-val">0</div>
    </div>

    <div class="keypad">
      <div class="key action" onclick="clearCalc()">AC</div>
      <div class="key action" onclick="deleteLast()">DEL</div>
      <div class="key operator" onclick="appendInput('%')">%</div>
      <div class="key operator" onclick="appendInput('/')">÷</div>

      <div class="key" onclick="appendInput('7')">7</div>
      <div class="key" onclick="appendInput('8')">8</div>
      <div class="key" onclick="appendInput('9')">9</div>
      <div class="key operator" onclick="appendInput('*')">×</div>

      <div class="key" onclick="appendInput('4')">4</div>
      <div class="key" onclick="appendInput('5')">5</div>
      <div class="key" onclick="appendInput('6')">6</div>
      <div class="key operator" onclick="appendInput('-')">−</div>

      <div class="key" onclick="appendInput('1')">1</div>
      <div class="key" onclick="appendInput('2')">2</div>
      <div class="key" onclick="appendInput('3')">3</div>
      <div class="key operator" onclick="appendInput('+')">+</div>

      <div class="key" onclick="appendInput('0')">0</div>
      <div class="key" onclick="appendInput('.')">.</div>
      <div class="key equals" onclick="calculate()">=</div>
    </div>
  </div>

  <script>
    // --- Immediate Initialization ---
    const currentValDisplay = document.getElementById("current-val");
    const historyDisplay = document.getElementById("history");
    const bg = document.getElementById("bg-canvas");
    const bgCtx = bg.getContext("2d", { alpha: false });

    let formula = "0";
    let lastResult = null;
    let isResetMode = false;

    function updateDisplay() {
      const displayStr = formula.replace(/\*/g, '×').replace(/\//g, '÷');
      currentValDisplay.innerText = displayStr || "0";
      const len = displayStr.length;
      currentValDisplay.style.fontSize = len > 18 ? "1.3rem" : len >
12 ? "1.8rem" : "2.6rem";
      currentValDisplay.scrollLeft = currentValDisplay.scrollWidth;
    }

    function appendInput(val) {
      const ops = ['+', '-', '*', '/', '%'];
      if (isResetMode) {
        formula = ops.includes(val) ? lastResult + val : (val === '.'
? "0." : val);
        isResetMode = false;
      } else {
        if (formula === "0" && !ops.includes(val) && val !== '.') formula = val;
        else if (ops.includes(val) && ops.includes(formula.slice(-1)))
formula = formula.slice(0, -1) + val;
        else formula += val;
      }
      updateDisplay();
    }

    function clearCalc() {
      formula = "0"; lastResult = null; historyDisplay.innerText = "";
isResetMode = false;
      updateDisplay();
    }

    function deleteLast() {
      if (isResetMode) return clearCalc();
      formula = formula.length > 1 ? formula.slice(0, -1) : "0";
      updateDisplay();
    }

    function calculate() {
      try {
        const tokens = formula.replace(/÷/g, '/').replace(/×/g,
'*').match(/(\d+\.?\d*)|([\+\-\*\/\%])/g);
        if (!tokens) return;

        let expression = tokens.join(' ');
        let result = Function('"use strict"; return (' + expression + ')')();

        historyDisplay.innerText = formula.replace(/\*/g,
'×').replace(/\//g, '÷') + " =";
        let formatted = parseFloat(result.toFixed(10)).toString();
        formula = formatted;
        lastResult = formatted;
        isResetMode = true;
        updateDisplay();
      } catch (e) {
        formula = "ERR"; isResetMode = true; updateDisplay();
      }
    }

    // --- High-Performance Animated Dark Background ---
    let particles = [];
    const resize = () => {
      bg.width = window.innerWidth;
      bg.height = window.innerHeight;
      particles = [];
      const count = Math.min(window.innerWidth / 10, 60);
      for(let i=0; i<count; i++) {
        particles.push({
          x: Math.random() * bg.width,
          y: Math.random() * bg.height,
          r: Math.random() * 2 + 0.5,
          vx: (Math.random() - 0.5) * 0.5,
          vy: (Math.random() - 0.5) * 0.5,
          o: Math.random()
        });
      }
    };

    const draw = () => {
      bgCtx.fillStyle = '#010307';
      bgCtx.fillRect(0, 0, bg.width, bg.height);

      // Floating Orbs for depth
      const time = Date.now() * 0.0005;
      const orbs = [
        { x: 0.2, y: 0.3, r: 400, c: '#001a33' },
        { x: 0.8, y: 0.7, r: 500, c: '#14082e' },
        { x: 0.5, y: 0.5, r: 450, c: '#00261f' }
      ];

      bgCtx.globalCompositeOperation = 'screen';
      orbs.forEach((o, i) => {
        const dx = (o.x + Math.sin(time + i) * 0.1) * bg.width;
        const dy = (o.y + Math.cos(time * 0.8 + i) * 0.1) * bg.height;
        const g = bgCtx.createRadialGradient(dx, dy, 0, dx, dy, o.r);
        g.addColorStop(0, o.c);
        g.addColorStop(1, 'transparent');
        bgCtx.fillStyle = g;
        bgCtx.fillRect(0, 0, bg.width, bg.height);
      });

      // Subtle Stars
      bgCtx.fillStyle = 'rgba(255, 255, 255, 0.2)';
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        if(p.x < 0) p.x = bg.width;
        if(p.x > bg.width) p.x = 0;
        if(p.y < 0) p.y = bg.height;
        if(p.y > bg.height) p.y = 0;
        bgCtx.beginPath();
        bgCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        bgCtx.fill();
      });

      requestAnimationFrame(draw);
    };

    window.addEventListener('resize', resize);
    resize();
    draw();
    updateDisplay();

    // Key Listeners
    window.addEventListener('keydown', (e) => {
      if (/[0-9\.]/.test(e.key)) appendInput(e.key);
      else if (['+', '-', '*', '/', '%'].includes(e.key)) appendInput(e.key);
      else if (e.key === 'Enter' || e.key === '=') calculate();
      else if (e.key === 'Backspace') deleteLast();
      else if (e.key === 'Escape') clearCalc();
    });
  </script>
</body>
</html>

